{"summary":"A Time Profiling Tool using trace to file for minimal runtime performance impact.","description":"<p> </p><p>This module is used to profile a program to find out how the execution time is used. Trace to file is used to minimize runtime performance impact. </p> <p>The <span class=\"code\">fprof</span> module uses tracing to collect profiling data, hence there is no need for special compilation of any module to be profiled. When it starts tracing, <span class=\"code\">fprof</span> will erase all previous tracing in the node and set the necessary trace flags on the profiling target processes as well as local call trace on all functions in all loaded modules and all modules to be loaded. <span class=\"code\">fprof</span> erases all tracing in the node when it stops tracing. </p> <p><span class=\"code\">fprof</span> presents both <strong>own time</strong> i.e how much time a function has used for its own execution, and <strong>accumulated time</strong> i.e including called functions. All presented times are collected using trace timestamps. <span class=\"code\">fprof</span> tries to collect cpu time timestamps, if the host machine OS supports it. Therefore the times may be wallclock times and OS scheduling will randomly strike all called functions in a presumably fair way. </p> <p>If, however, the profiling time is short, and the host machine OS does not support high resolution cpu time measurements, some few OS schedulings may show up as ridiculously long execution times for functions doing practically nothing. An example of a function more or less just composing a tuple in about 100 times the normal execution time has been seen, and when the tracing was repeated, the execution time became normal. </p> <p>Profiling is essentially done in 3 steps:</p> <dl> <dt><strong><span class=\"code\">1</span></strong></dt> <dd>Tracing; to file, as mentioned in the previous paragraph. The trace contains entries for function calls, returns to function, process scheduling, other process related (spawn, etc) events, and garbage collection. All trace entries are timestamped.</dd> <dt><strong><span class=\"code\">2</span></strong></dt> <dd>Profiling; the trace file is read, the execution call stack is simulated, and raw profile data is calculated from the simulated call stack and the trace timestamps. The profile data is stored in the <span class=\"code\">fprof</span> server state. During this step the trace data may be dumped in text format to file or console. </dd> <dt><strong><span class=\"code\">3</span></strong></dt> <dd>Analysing; the raw profile data is sorted, filtered and dumped in text format either to file or console. The text format intended to be both readable for a human reader, as well as parsable with the standard erlang parsing tools.</dd> </dl> <p>Since <span class=\"code\">fprof</span> uses trace to file, the runtime performance degradation is minimized, but still far from negligible, especially for programs that use the filesystem heavily by themselves. Where you place the trace file is also important, e.g on Solaris <span class=\"code\">/tmp</span> is usually a good choice since it is essentially a RAM disk, while any NFS (network) mounted disk is a bad idea. </p> <p><span class=\"code\">fprof</span> can also skip the file step and trace to a tracer process that does the profiling in runtime. <a name=\"start\"></a></p> <p></p>","funcs":" <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-start-0-id83064\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L103\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"start-0\" href=\"/erldoc/docs/#start-0\">start() -&gt; {ok, Pid} | {error, {already_started, Pid}}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Pid = pid()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Starts the <span class=\"code\">fprof</span>&#xA0;server. </p> <p>Note that it seldom needs to be started explicitly since it is automatically started by the functions that need a running server. <a name=\"stop\"></a></p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-stop-0-id83112\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L119\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"stop-0\" href=\"/erldoc/docs/#stop-0\">stop() -&gt; ok</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">stop(normal)</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-stop-1-id79694\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L126\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"stop-1\" href=\"/erldoc/docs/#stop-1\">stop(Reason) -&gt; ok</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Stops the <span class=\"code\">fprof</span>&#xA0;server. </p> <p>The supplied <span class=\"code\">Reason</span> becomes the exit reason for the server process. Default Any <span class=\"code\">Reason</span> other than <span class=\"code\">kill</span> sends a request to the server and waits for it to clean up, reply and exit. If <span class=\"code\">Reason</span> is <span class=\"code\">kill</span>, the server is bluntly killed. </p> <p>If the <span class=\"code\">fprof</span>&#xA0;server is not running, this function returns immediately with the same return value. </p> <div class=\"note\"><div class=\"label\">Note</div><div class=\"content\"><p> </p><p>When the <span class=\"code\">fprof</span>&#xA0;server is stopped the collected raw profile data is lost.</p> <p></p></div></div> <a name=\"apply\"></a> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-apply-2-id79780\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L151\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"apply-2\" href=\"/erldoc/docs/#apply-2\">apply(Func, Args) -&gt; term()</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Func = function() | {Module, Function}</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Args = [term()]</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Module = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Function = atom()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">apply(Func, Args, [])</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-apply-3-id79830\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L164\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"apply-3\" href=\"/erldoc/docs/#apply-3\">apply(Module, Function, Args) -&gt; term()</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Args = [term()]</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Module = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Function = atom()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">apply({Module, Function}, Args, [])</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-apply-3-id79876\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L176\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"apply-3\" href=\"/erldoc/docs/#apply-3\">apply(Func, Args, OptionList) -&gt; term()</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Func = function() | {Module, Function}</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Args = [term()]</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OptionList = [Option]</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Module = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Function = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Option = continue | start | {procs, PidList} | TraceStartOption</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Calls <span class=\"code\">erlang:apply(Func, Args)</span> surrounded by <span class=\"code\">trace([start, ...])</span> and <span class=\"code\">trace(stop)</span>. </p> <p>Some effort is made to keep the trace clean from unnecessary trace messages; tracing is started and stopped from a spawned process while the <span class=\"code\">erlang:apply/2</span> call is made in the current process, only surrounded by <span class=\"code\">receive</span> and <span class=\"code\">send</span> statements towards the trace starting process. The trace starting process exits when not needed any more. </p> <p>The <span class=\"code\">TraceStartOption</span> is any option allowed for <span class=\"code\">trace/1</span>. The options <span class=\"code\">[start, {procs, [self() | PidList]} | OptList]</span> are given to <span class=\"code\">trace/1</span>, where <span class=\"code\">OptList</span> is <span class=\"code\">OptionList</span> with <span class=\"code\">continue</span>, <span class=\"code\">start</span> and <span class=\"code\">{procs, _}</span> options removed. </p> <p>The <span class=\"code\">continue</span> option inhibits the call to <span class=\"code\">trace(stop)</span> and leaves it up to the caller to stop tracing at a suitable time.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-apply-4-id80017\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L212\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"apply-4\" href=\"/erldoc/docs/#apply-4\">apply(Module, Function, Args, OptionList) -&gt; term()</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Module = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Function = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Args = [term()]</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">apply({Module, Function}, Args, OptionList)</span>. </p> <p><span class=\"code\">OptionList</span> is an option list allowed for <span class=\"code\">apply/3</span>. <a name=\"trace\"></a></p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-trace-2-id80078\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L230\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"trace-2\" href=\"/erldoc/docs/#trace-2\">trace(start, Filename) -&gt; ok | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">trace([start, {file, Filename}])</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-trace-2-id80117\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L240\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"trace-2\" href=\"/erldoc/docs/#trace-2\">trace(verbose, Filename) -&gt; ok | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">trace([start, verbose, {file, Filename}])</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-trace-2-id80156\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L251\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"trace-2\" href=\"/erldoc/docs/#trace-2\">trace(OptionName, OptionValue) -&gt; ok | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OptionName = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OptionValue = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">trace([{OptionName, OptionValue}])</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-trace-1-id80203\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L264\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"trace-1\" href=\"/erldoc/docs/#trace-1\">trace(verbose) -&gt; ok | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">trace([start, verbose])</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-trace-1-id80242\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L274\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"trace-1\" href=\"/erldoc/docs/#trace-1\">trace(OptionName) -&gt; ok | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OptionName = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">trace([OptionName])</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-trace-1-id80284\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L285\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"trace-1\" href=\"/erldoc/docs/#trace-1\">trace({OptionName, OptionValue}) -&gt; ok | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OptionName = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OptionValue = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">trace([{OptionName, OptionValue}])</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-trace-1-id80331\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L298\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"trace-1\" href=\"/erldoc/docs/#trace-1\">trace([Option]) -&gt; ok | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Option = start | stop | {procs, PidSpec} | {procs, [PidSpec]} | verbose | {verbose, bool()} | file | {file, Filename} | {tracer, Tracer}</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">PidSpec = pid() | atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Tracer = pid() | port()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Starts or stops tracing. </p> <p><span class=\"code\">PidSpec</span> and <span class=\"code\">Tracer</span> are used in calls to <span class=\"code\">erlang:trace(PidSpec, true, [{tracer, Tracer} | Flags])</span>, and <span class=\"code\">Filename</span> is used to call <span class=\"code\">dbg:trace_port(file, Filename)</span>. Please see the appropriate documentation.</p> <p>Option description:</p> <dl> <dt><strong><span class=\"code\">stop</span></strong></dt> <dd>Stops a running <span class=\"code\">fprof</span> trace and clears all tracing from the node. Either option <span class=\"code\">stop</span> or <span class=\"code\">start</span> must be specified, but not both.</dd> <dt><strong><span class=\"code\">start</span></strong></dt> <dd>Clears all tracing from the node and starts a new <span class=\"code\">fprof</span> trace. Either option <span class=\"code\">start</span> or <span class=\"code\">stop</span> must be specified, but not both.</dd> <dt><strong><span class=\"code\">verbose</span>| <span class=\"code\">{verbose, bool()}</span></strong></dt> <dd>The options <span class=\"code\">verbose</span> or <span class=\"code\">{verbose, true}</span> adds some trace flags that <span class=\"code\">fprof</span> does not need, but that may be interesting for general debugging purposes. This option is only allowed with the <span class=\"code\">start</span> option.</dd> <dt><strong><span class=\"code\">cpu_time</span>| <span class=\"code\">{cpu_time, bool()}</span></strong></dt> <dd>The options <span class=\"code\">cpu_time</span> or <span class=\"code\">{cpu_time, true}</span> makes the timestamps in the trace be in CPU time instead of wallclock time which is the default. This option is only allowed with the <span class=\"code\">start</span> option. <div class=\"warning\"><div class=\"label\">Warning</div><div class=\"content\"><p></p><p>Getting correct values out of cpu_time can be difficult. The best way to get correct values is to run using a single scheduler and bind that scheduler to a specific CPU, i.e. <span class=\"code\">erl +S 1 +sbt db</span>.</p> <p></p></div></div> </dd> <dt><strong><span class=\"code\">{procs, PidSpec}</span>| <span class=\"code\">{procs, [PidSpec]}</span></strong></dt> <dd>Specifies which processes that shall be traced. If this option is not given, the calling process is traced. All processes spawned by the traced processes are also traced. This option is only allowed with the <span class=\"code\">start</span> option.</dd> <dt><strong><span class=\"code\">file</span>| <span class=\"code\">{file, Filename}</span></strong></dt> <dd>Specifies the filename of the trace. If the option <span class=\"code\">file</span> is given, or none of these options are given, the file <span class=\"code\">&quot;fprof.trace&quot;</span> is used. This option is only allowed with the <span class=\"code\">start</span> option, but not with the <span class=\"code\">{tracer, Tracer}</span> option.</dd> <dt><strong><span class=\"code\">{tracer, Tracer}</span></strong></dt> <dd>Specifies that trace to process or port shall be done instead of trace to file. This option is only allowed with the <span class=\"code\">start</span> option, but not with the <span class=\"code\">{file, Filename}</span> option.</dd> </dl> <a name=\"profile\"></a> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-profile-0-id80578\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L362\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"profile-0\" href=\"/erldoc/docs/#profile-0\">profile() -&gt; ok | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">profile([])</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-profile-2-id80616\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L372\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"profile-2\" href=\"/erldoc/docs/#profile-2\">profile(OptionName, OptionValue) -&gt; ok | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OptionName = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OptionValue = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">profile([{OptionName, OptionValue}])</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-profile-1-id80663\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L385\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"profile-1\" href=\"/erldoc/docs/#profile-1\">profile(OptionName) -&gt; ok | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OptionName = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">profile([OptionName])</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-profile-1-id80706\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L396\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"profile-1\" href=\"/erldoc/docs/#profile-1\">profile({OptionName, OptionValue}) -&gt; ok | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OptionName = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OptionValue = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">profile([{OptionName, OptionValue}])</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-profile-1-id80752\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L409\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"profile-1\" href=\"/erldoc/docs/#profile-1\">profile([Option]) -&gt; ok | {ok, Tracer} | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Option = file | {file, Filename} | dump | {dump, Dump} | append | start | stop</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Dump = pid() | Dumpfile | []</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Tracer = pid()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Compiles a trace into raw profile data held by the <span class=\"code\">fprof</span>&#xA0;server. </p> <p><span class=\"code\">Dumpfile</span> is used to call <span class=\"code\">file:open/2</span>, and <span class=\"code\">Filename</span> is used to call <span class=\"code\">dbg:trace_port(file, Filename)</span>. Please see the appropriate documentation.</p> <p>Option description:</p> <dl> <dt><strong><span class=\"code\">file</span>| <span class=\"code\">{file, Filename}</span></strong></dt> <dd>Reads the file <span class=\"code\">Filename</span> and creates raw profile data that is stored in RAM by the <span class=\"code\">fprof</span>&#xA0;server. If the option <span class=\"code\">file</span> is given, or none of these options are given, the file <span class=\"code\">&quot;fprof.trace&quot;</span> is read. The call will return when the whole trace has been read with the return value <span class=\"code\">ok</span> if successful. This option is not allowed with the <span class=\"code\">start</span> or <span class=\"code\">stop</span> options.</dd> <dt><strong><span class=\"code\">dump</span>| <span class=\"code\">{dump, Dump}</span></strong></dt> <dd>Specifies the destination for the trace text dump. If this option is not given, no dump is generated, if it is <span class=\"code\">dump</span> the destination will be the caller&apos;s group leader, otherwise the destination <span class=\"code\">Dump</span> is either the pid of an I/O device or a filename. And, finally, if the filename is <span class=\"code\">[]</span> - <span class=\"code\">&quot;fprof.dump&quot;</span> is used instead. This option is not allowed with the <span class=\"code\">stop</span> option.</dd> <dt><strong><span class=\"code\">append</span></strong></dt> <dd>Causes the trace text dump to be appended to the destination file. This option is only allowed with the <span class=\"code\">{dump, Dumpfile}</span> option.</dd> <dt><strong><span class=\"code\">start</span></strong></dt> <dd>Starts a tracer process that profiles trace data in runtime. The call will return immediately with the return value <span class=\"code\">{ok, Tracer}</span> if successful. This option is not allowed with the <span class=\"code\">stop</span>, <span class=\"code\">file</span> or <span class=\"code\">{file, Filename}</span> options.</dd> <dt><strong><span class=\"code\">stop</span></strong></dt> <dd>Stops the tracer process that profiles trace data in runtime. The return value will be value <span class=\"code\">ok</span> if successful. This option is not allowed with the <span class=\"code\">start</span>, <span class=\"code\">file</span> or <span class=\"code\">{file, Filename}</span> options.</dd> </dl> <a name=\"analyse\"></a> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-analyse-0-id80971\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L467\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"analyse-0\" href=\"/erldoc/docs/#analyse-0\">analyse() -&gt; ok | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">analyse([])</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-analyse-2-id81010\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L477\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"analyse-2\" href=\"/erldoc/docs/#analyse-2\">analyse(OptionName, OptionValue) -&gt; ok | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OptionName = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OptionValue = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">analyse([{OptionName, OptionValue}])</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-analyse-1-id81056\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L490\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"analyse-1\" href=\"/erldoc/docs/#analyse-1\">analyse(OptionName) -&gt; ok | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OptionName = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">analyse([OptionName])</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-analyse-1-id81099\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L501\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"analyse-1\" href=\"/erldoc/docs/#analyse-1\">analyse({OptionName, OptionValue}) -&gt; ok | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OptionName = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OptionValue = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Same as <span class=\"code\">analyse([{OptionName, OptionValue}])</span>.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-analyse-1-id81145\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/tools/doc/src/fprof.xml#L514\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"analyse-1\" href=\"/erldoc/docs/#analyse-1\">analyse([Option]) -&gt; ok | {error, Reason} | {&apos;EXIT&apos;, ServerPid, Reason}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Option = dest | {dest, Dest} | append | {cols, Cols} | callers | {callers, bool()} | no_callers | {sort, SortSpec} | totals | {totals, bool()} | details | {details, bool()} | no_details</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Dest = pid() | Destfile</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Cols = integer() &gt;= 80</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">SortSpec = acc | own</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Analyses raw profile data in the <span class=\"code\">fprof</span>&#xA0;server. If called while there is no raw profile data available, <span class=\"code\">{error, no_profile}</span> is returned. </p> <p><span class=\"code\">Destfile</span> is used to call <span class=\"code\">file:open/2</span>. Please see the appropriate documentation.</p> <p>Option description:</p> <dl> <dt><strong><span class=\"code\">dest</span>| <span class=\"code\">{dest, Dest}</span></strong></dt> <dd>Specifies the destination for the analysis. If this option is not given or it is <span class=\"code\">dest</span>, the destination will be the caller&apos;s group leader, otherwise the destination <span class=\"code\">Dest</span> is either the <span class=\"code\">pid()</span> of an I/O device or a filename. And, finally, if the filename is <span class=\"code\">[]</span> - <span class=\"code\">&quot;fprof.analysis&quot;</span> is used instead.</dd> <dt><strong><span class=\"code\">append</span></strong></dt> <dd>Causes the analysis to be appended to the destination file. This option is only allowed with the <span class=\"code\">{dest, Destfile}</span> option.</dd> <dt><strong><span class=\"code\">{cols, Cols}</span></strong></dt> <dd>Specifies the number of columns in the analysis text. If this option is not given the number of columns is set to 80.</dd> <dt><strong><span class=\"code\">callers</span>| <span class=\"code\">{callers, true}</span></strong></dt> <dd>Prints callers and called information in the analysis. This is the default.</dd> <dt><strong><span class=\"code\">{callers, false}</span>| <span class=\"code\">no_callers</span></strong></dt> <dd>Suppresses the printing of callers and called information in the analysis.</dd> <dt><strong><span class=\"code\">{sort, SortSpec}</span></strong></dt> <dd>Specifies if the analysis should be sorted according to the ACC column, which is the default, or the OWN column. See <span class=\"bold_code bc-17\"><a href=\"/erldoc/docs/#analysis\">Analysis Format</a></span> below.</dd> <dt><strong><span class=\"code\">totals</span>| <span class=\"code\">{totals, true}</span></strong></dt> <dd>Includes a section containing call statistics for all calls regardless of process, in the analysis.</dd> <dt><strong><span class=\"code\">{totals, false}</span></strong></dt> <dd>Supresses the totals section in the analysis, which is the default.</dd> <dt><strong><span class=\"code\">details</span>| <span class=\"code\">{details, true}</span></strong></dt> <dd>Prints call statistics for each process in the analysis. This is the default.</dd> <dt><strong><span class=\"code\">{details, false}</span>| <span class=\"code\">no_details</span></strong></dt> <dd>Suppresses the call statistics for each process from the analysis.</dd> </dl> <p></p></div> "}