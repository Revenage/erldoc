{"summary":"Behaviour module for the SNMP agent discovery handler.","description":"<p> </p><p>This module defines the behaviour of the agent discovery handler. A <span class=\"code\">snmpa_discovery_handler</span> compliant module must export the following functions: </p> <ul> <li> <p><span class=\"bold_code bc-17\"><a href=\"/erldoc/docs/#stage1_finish\">stage1_finish/2</a></span></p> </li> </ul> <p>The semantics of them and their exact signatures are explained below. </p> <a name=\"stage1_finish\"></a> <p></p>","funcs":" <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-stage1_finish-3-id123277\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpa_discovery_handler.xml#L53\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"stage1_finish-3\" href=\"/erldoc/docs/#stage1_finish-3\">stage1_finish(TargetName, ManagerEngineID, ExtraInfo) -&gt; ignore | {ok, usm_entry() | [usm_entry()]} | {ok, usm_entry() | [usm_entry()], NewExtraInfo}</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">TargetName = string()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">ManagerEngineID = string()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">ExtraInfo = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">usm_entry() = tuple() compatible with usm.conf</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">NewExtraInfo = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>This function is called at the end of stage 1 of the discovery process. It should return either the atom <span class=\"code\">ignore</span> or <span class=\"code\">{ok, usm_entry() | [usm_entry()]}</span>. See <span class=\"bold_code bc-15\"><a href=\"/erldoc/docs/../apps/snmp/snmp_agent_config_files#usm\">usm_entry()</a></span> and <span class=\"bold_code bc-15\"><a href=\"/erldoc/docs/snmpa_conf#usm_entry\">usm_entry/13</a></span> for more info. </p> <p>If the function returns <span class=\"code\">ignore</span>, then it is assumed that either: </p> <ul> <li>The caller (of the discovery function) will make the needed updates later. </li> <li>The callback function itself did the updates. </li> </ul> <p>In either case, the agent will do nothing, but return the retrieved ManagerEngineID (see <span class=\"bold_code bc-15\"><a href=\"/erldoc/docs/snmpa#discovery\">discovery</a></span> for more info) and possible continue with stage 2 of the discovery process. </p> <p>The <span class=\"code\">ExtraInfo</span> argument is passed on from the <span class=\"bold_code bc-15\"><a href=\"/erldoc/docs/snmpa#discovery\">discovery</a></span> function. </p> <p>This function may return an updated <span class=\"code\">NewExtraInfo</span> that will be used in subsequent calls to the callback functions. Intended for future use. </p> <p>The purpose of this function is to generate the usm- related security data needed for usm processing in the agent. Specifically, updating the usmUserTable. </p> <p>When an <span class=\"code\">usm_entry()</span> tuple (or a list of such tuples) is returned, this data is then added to the <span class=\"code\">usmUserTable</span> by the (master-) agent. </p> <p>When an <span class=\"code\">usm_entry()</span> tuple (or a list of such tuples) is returned, this data is then added to the <span class=\"code\">usmUserTable</span> by the (master-) agent. </p> <div class=\"note\"><div class=\"label\">Note</div><div class=\"content\"><p></p><p>Note that the function does not check if this entry already exists. </p><p></p></div></div> <div class=\"note\"><div class=\"label\">Note</div><div class=\"content\"><p></p><p>Note that this function is executed in the context of the master-agent process. </p><p></p></div></div> <p></p></div> ","name":"snmpa_discovery_handler"}