{"summary":"Abstract Data Type for SNMP Indexing","description":"<p> </p><p>The module <span class=\"code\">snmp_index</span> implements an Abstract Data Type (ADT) for an SNMP index structure for SNMP tables. It is implemented as an ets table of the ordered_set data-type, which means that all operations are O(log n). In the table, the key is an ASN.1 OBJECT IDENTIFIER. </p> <p>This index is used to separate the implementation of the SNMP ordering from the actual implementation of the table. The SNMP ordering, that is implementation of GET NEXT, is implemented in this module. </p> <p>For example, suppose there is an SNMP table, which is best implemented in Erlang as one process per SNMP table row. Suppose further that the INDEX in the SNMP table is an OCTET STRING. The index structure would be created as follows: </p> <div class=\"example example-none\"><pre>snmp_index:new(string)</pre></div> <p>For each new process we create, we insert an item in an <span class=\"code\">snmp_index</span> structure: </p> <div class=\"example example-none\"><pre>new_process(Name, SnmpIndex) -&gt; Pid = start_process(), NewSnmpIndex = snmp_index:insert(SnmpIndex, Name, Pid), &lt;...&gt;</pre></div> <p>With this structure, we can now map an OBJECT IDENTIFIER in e.g. a GET NEXT request, to the correct process: </p> <div class=\"example example-none\"><pre>get_next_pid(Oid, SnmpIndex) -&gt; {ok, {_, Pid}} = snmp_index:get_next(SnmpIndex, Oid), Pid.</pre></div> <p></p>","funcs":" <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-delete-1-id131232\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmp_index.xml#L161\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"delete-1\" href=\"/erldoc/docs/#delete-1\">delete(Index) -&gt; true</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Index = NewIndex = index()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Key = key()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Deletes a complete index structure (i.e. the ets table holding the index). The index can no longer be referenced after this call. See the <span class=\"bold_code bc-17\"><a href=\"/erldoc/docs/#1\">warning note</a></span> above.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-delete-2-id131274\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmp_index.xml#L175\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"delete-2\" href=\"/erldoc/docs/#delete-2\">delete(Index, Key) -&gt; NewIndex</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Index = NewIndex = index()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Key = key()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Deletes a key and its value from the index structure. Returns a new structure.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-get-2-id131309\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmp_index.xml#L187\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"get-2\" href=\"/erldoc/docs/#get-2\">get(Index, KeyOid) -&gt; {ok, {KeyOid, Value}} | undefined</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Index = index()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">KeyOid = oid()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Value = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Gets the item with key <span class=\"code\">KeyOid</span>. Could be used from within an SNMP instrumentation function.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-get_last-1-id131355\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmp_index.xml#L200\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"get_last-1\" href=\"/erldoc/docs/#get_last-1\">get_last(Index) -&gt; {ok, {KeyOid, Value}} | undefined</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Index = index()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">KeyOid = oid()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Value = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Gets the last item in the index structure.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-get_next-2-id131394\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmp_index.xml#L212\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"get_next-2\" href=\"/erldoc/docs/#get_next-2\">get_next(Index, KeyOid) -&gt; {ok, {NextKeyOid, Value}} | undefined</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Index = index()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">KeyOid = NextKeyOid = oid()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Value = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Gets the next item in the SNMP lexicographic ordering, after <span class=\"code\">KeyOid</span> in the index structure. <span class=\"code\">KeyOid</span> does not have to refer to an existing item in the index.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-insert-3-id131441\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmp_index.xml#L226\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"insert-3\" href=\"/erldoc/docs/#insert-3\">insert(Index, Key, Value) -&gt; NewIndex</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Index = NewIndex = index()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Key = key()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Value = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Inserts a new key value tuple into the index structure. If an item with the same key already exists, the new <span class=\"code\">Value</span> overwrites the old value.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-key_to_oid-2-id131485\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmp_index.xml#L240\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"key_to_oid-2\" href=\"/erldoc/docs/#key_to_oid-2\">key_to_oid(Index, Key) -&gt; KeyOid</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Index = index()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Key = key()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">KeyOid = NextKeyOid = oid()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Converts <span class=\"code\">Key</span> to an OBJECT IDENTIFIER.</p> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-new-1-id131528\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmp_index.xml#L252\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"new-1\" href=\"/erldoc/docs/#new-1\">new(KeyTypes) -&gt; Index</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">KeyTypes = key_types()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Index = index()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Creates a new snmp index structure. The <span class=\"code\">key_types()</span> type is described above.</p> <p></p></div> ","name":"snmp_index"}