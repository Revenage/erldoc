{"summary":"Behaviour module for the SNMP manager user.","description":"<p> </p><p>This module defines the behaviour of the manager user. A <span class=\"code\">snmpm_user</span> compliant module must export the following functions: </p> <ul> <li> <p>handle_error/3</p> </li> <li> <p>handle_agent/4</p> </li> <li> <p>handle_pdu/4</p> </li> <li> <p>handle_trap/3</p> </li> <li> <p>handle_inform/3</p> </li> <li> <p>handle_report/3</p> </li> <li> <p>handle_invalid_result/2</p> </li> </ul> <p>The semantics of them and their exact signatures are explained below. </p> <p>Some of the function has no defined return value (<span class=\"code\">void()</span>), they can of course return anything. But the functions that do have specified return value(s) <strong>must</strong> adhere to this. None of the functions can use exit of throw to return. </p> <p>If the manager is not configured to use any particular transport domain, the behaviour <span class=\"code\">handle_agent/4</span> will for backwards copmpatibility reasons be called with the old <span class=\"code\">IpAddr</span> and <span class=\"code\">PortNumber</span> arguments</p> <a name=\"types\"></a> <p></p>","funcs":" <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-handle_error-3-id143077\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpm_user.xml#L95\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"handle_error-3\" href=\"/erldoc/docs/#handle_error-3\">handle_error(ReqId, Reason, UserData) -&gt; void()</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">ReqId = integer()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = {unexpected_pdu, SnmpInfo} | {invalid_sec_info, SecInfo, SnmpInfo} | {empty_message, Addr, Port} | term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">SnmpInfo = snmp_gen_info()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">SecInfo = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Addr = ip_address()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Port = integer()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">UserData = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>This function is called when the manager needs to communicate an &quot;asynchronous&quot; error to the user: e.g. failure to send an asynchronous message (i.e. encoding error), a received message was discarded due to security error, the manager failed to generate a response message to a received inform-request, or when receiving an unexpected PDU from an agent (could be an expired async request). </p> <p>If <span class=\"code\">ReqId</span> is less then 0, it means that this information was not available to the manager (that info was never retrieved before the message was discarded). </p> <p>For <span class=\"code\">SnmpInfo</span> see handle_agent below.</p> <a name=\"handle_agent\"></a> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-handle_agent-5-id143156\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpm_user.xml#L124\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"handle_agent-5\" href=\"/erldoc/docs/#handle_agent-5\">handle_agent(Domain, Addr, Type, SnmpInfo, UserData) -&gt; Reply</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Domain = transportDomainUdpIpv4 | transportDomainUdpIpv6</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Addr = {<span class=\"bold_code bc-13\"><a href=\"/erldoc/docs/inet#type-ip_address\">inet:ip_address(), inet:port_number()</a></span>} </span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Type = pdu | trap | report | inform</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">SnmpInfo = SnmpPduInfo | SnmpTrapInfo | SnmpReportInfo | SnmpInformInfo</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">SnmpPduInfo = snmp_gen_info()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">SnmpTrapInfo = snmp_v1_trap_info()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">SnmpReportInfo = snmp_gen_info()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">SnmpInformInfo = snmp_gen_info()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">UserData = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reply = ignore | {register, UserId, TargetName, AgentConfig}</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">UserId = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">TargetName = target_name()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">AgentConfig = [agent_config()]</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>This function is called when a message is received from an unknown agent.</p> <p>Note that this will always be the default user that is called.</p> <p>For more info about the <span class=\"code\">agent_config()</span>, see <span class=\"bold_code bc-15\"><a href=\"/erldoc/docs/snmpm#register_agent\">register_agent</a></span>.</p> <p>The arguments <span class=\"code\">Type</span> and <span class=\"code\">SnmpInfo</span> relates in the following way: </p> <ul> <li> <p><span class=\"code\">pdu</span> - <span class=\"code\">SnmpPduInfo</span> (see <span class=\"bold_code bc-17\"><a href=\"/erldoc/docs/#handle_pdu\">handle_pdu</a></span> for more info).</p> </li> <li> <p><span class=\"code\">trap</span> - <span class=\"code\">SnmpTrapInfo</span> (see <span class=\"bold_code bc-17\"><a href=\"/erldoc/docs/#handle_trap\">handle_trap</a></span> for more info).</p> </li> <li> <p><span class=\"code\">report</span> - <span class=\"code\">SnmpReportInfo</span> (see <span class=\"bold_code bc-17\"><a href=\"/erldoc/docs/#handle_report\">handle_report</a></span> for more info).</p> </li> <li> <p><span class=\"code\">inform</span> - <span class=\"code\">SnmpInformInfo</span> (see <span class=\"bold_code bc-17\"><a href=\"/erldoc/docs/#handle_inform\">handle_inform</a></span> for more info).</p> </li> </ul> <p>The only user which would return <span class=\"code\">{register, UserId, TargetName, AgentConfig}</span> is the <strong>default user</strong>.</p> <a name=\"handle_pdu\"></a> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-handle_pdu-4-id143371\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpm_user.xml#L183\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"handle_pdu-4\" href=\"/erldoc/docs/#handle_pdu-4\">handle_pdu(TargetName, ReqId, SnmpPduInfo, UserData) -&gt; void()</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">TargetName = target_name()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">ReqId = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">SnmpPduInfo = snmp_gen_info()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">UserData = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Handle the reply to an asynchronous request, such as <span class=\"bold_code bc-15\"><a href=\"/erldoc/docs/snmpm#async_get\">async_get</a></span>, <span class=\"bold_code bc-15\"><a href=\"/erldoc/docs/snmpm#async_get_next\">async_get_next</a></span> or <span class=\"bold_code bc-15\"><a href=\"/erldoc/docs/snmpm#async_set\">async_set</a></span>.</p> <p>It could also be a late reply to a synchronous request.</p> <p><span class=\"code\">ReqId</span> is returned by the asynchronous request function.</p> <a name=\"handle_trap\"></a> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-handle_trap-3-id143448\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpm_user.xml#L204\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"handle_trap-3\" href=\"/erldoc/docs/#handle_trap-3\">handle_trap(TargetName, SnmpTrapInfo, UserData) -&gt; Reply</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">TargetName = TargetName2 = target_name()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">SnmpTrapInfo = snmp_v1_trap_info() | snmp_gen_info()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">UserData = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reply = ignore | unregister | {register, UserId, TargetName2, AgentConfig}</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">UserId = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">AgentConfig = [agent_config()]</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Handle a trap/notification message from an agent.</p> <p>For more info about the <span class=\"code\">agent_config()</span>, see <span class=\"bold_code bc-15\"><a href=\"/erldoc/docs/snmpm#register_agent\">register_agent</a></span></p> <p>The only user which would return <span class=\"code\">{register, UserId, TargetName2, agent_info()}</span> is the <strong>default user</strong>.</p> <a name=\"handle_inform\"></a> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-handle_inform-3-id143528\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpm_user.xml#L227\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"handle_inform-3\" href=\"/erldoc/docs/#handle_inform-3\">handle_inform(TargetName, SnmpInformInfo, UserData) -&gt; Reply</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">TargetName = TargetName2 = target_name()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">SnmpInformInfo = snmp_gen_info()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">UserData = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reply = ignore | no_reply | unregister | {register, UserId, TargetName2, AgentConfig}</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">UserId = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">AgentConfig = [agent_config()]</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Handle a inform message.</p> <p>For more info about the <span class=\"code\">agent_config()</span>, see <span class=\"bold_code bc-15\"><a href=\"/erldoc/docs/snmpm#register_agent\">register_agent</a></span></p> <p>The only user which would return <span class=\"code\">{register, UserId, TargetName2, AgentConfig}</span> is the <strong>default user</strong>.</p> <p>If the <span class=\"bold_code bc-15\"><a href=\"/erldoc/docs/../apps/snmp/snmp_config#manager_irb\">inform request behaviour</a></span> configuration option is set to <span class=\"code\">user</span> or <span class=\"code\">{user, integer()}</span>, the response (acknowledgment) to this inform-request will be sent when this function returns.</p> <a name=\"handle_report\"></a> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-handle_report-3-id143626\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpm_user.xml#L255\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"handle_report-3\" href=\"/erldoc/docs/#handle_report-3\">handle_report(TargetName, SnmpReportInfo, UserData) -&gt; Reply</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">TargetName = TargetName2 = target_name()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Addr = ip_address()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Port = integer()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">SnmpReportInfo = snmp_gen_info()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">UserData = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reply = ignore | unregister | {register, UserId, TargetName2, AgentConfig}</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">UserId = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">AgentConfig = [agent_config()]</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Handle a report message.</p> <p>For more info about the <span class=\"code\">agent_config()</span>, see <span class=\"bold_code bc-15\"><a href=\"/erldoc/docs/snmpm#register_agent\">register_agent</a></span></p> <p>The only user which would return <span class=\"code\">{register, UserId, TargetName2, AgentConfig}</span> is the <strong>default user</strong>.</p> <a name=\"handle_invalid_result\"></a> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-handle_invalid_result-2-id143713\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpm_user.xml#L280\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"handle_invalid_result-2\" href=\"/erldoc/docs/#handle_invalid_result-2\">handle_invalid_result(IN, OUT) -&gt; void()</a></span></div></td><td class=\"func-since-td\"><span class=\"since\">OTP R16B03</span></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">IN = {Func, Args}</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Func = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Args = list()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">OUT = {crash, CrashInfo} | {result, InvalidResult}</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">CrashInfo = {ErrorType, Error, Stacktrace}</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">ErrorType = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Error = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Stacktrace = list()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">InvalidResult = term()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>If <strong>any</strong> of the <strong>other</strong> callback functions crashes (exit, throw or a plain crash) or return an invalid result (if a valid return has been specified), this function is called. The purpose is to allow the user handle this error (for instance to issue an error report).</p> <p><span class=\"code\">IN</span> reprecents the function called (and its arguments). <span class=\"code\">OUT</span> represents the unexpected/invalid result. </p> <p></p></div> "}