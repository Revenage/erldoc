{"summary":"Message Processing and Dispatch module for the SNMP agent","description":"<p> </p><p>The module <span class=\"code\">snmpa_mpd</span> implements the version independent Message Processing and Dispatch functionality in SNMP for the agent. It is supposed to be used from a Network Interface process (<span class=\"bold_code bc-19\"><a href=\"/erldoc/docs/../apps/snmp/snmp_agent_netif\">Definition of Agent Net if</a></span>). </p> <a name=\"init\"></a> <p></p>","funcs":" <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-init-1-id126922\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpa_mpd.xml#L54\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"init-1\" href=\"/erldoc/docs/#init-1\">init(Vsns) -&gt; mpd_state()</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Vsns = [Vsn]</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Vsn = v1 | v2 | v3</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>This function can be called from the net_if process at start-up. The options list defines which versions to use. </p> <p>It also initializes some SNMP counters. </p> <a name=\"process_packet\"></a> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-process_packet-5-id126966\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpa_mpd.xml#L72\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"process_packet-5\" href=\"/erldoc/docs/#process_packet-5\">process_packet(Packet, From, State, NoteStore, Log) -&gt; {ok, Vsn, Pdu, PduMS, ACMData} | {discarded, Reason} | {discovery, DiscoPacket}</a></span></div></td><td class=\"func-since-td\"><span class=\"since\">OTP 17.3</span></td></tr></tbody></table><table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-process_packet-6-id126973\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpa_mpd.xml#L72\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"process_packet-6\" href=\"/erldoc/docs/#process_packet-6\">process_packet(Packet, From, LocalEngineID, State, NoteStore, Log) -&gt; {ok, Vsn, Pdu, PduMS, ACMData} | {discarded, Reason} | {discovery, DiscoPacket}</a></span></div></td><td class=\"func-since-td\"><span class=\"since\">OTP R14B</span></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Packet = binary()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">From = {TDomain, TAddr}</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">TDomain = transportDomainUdpIpv4 | transportDomainUdpIpv6</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">TAddr = {IpAddr, IpPort}</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">LocalEngineID = string()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">IpAddr = <span class=\"bold_code bc-13\"><a href=\"/erldoc/docs/inet#type-ip_address\">inet:ip_address()</a></span></span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">IpPort = inet:port_number()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">State = mpd_state()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">NoteStore = pid()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Log = snmp_log()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Vsn = &apos;version-1&apos; | &apos;version-2&apos; | &apos;version-3&apos;</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Pdu = #pdu</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">PduMs = integer()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">ACMData = acm_data()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Reason = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">DiscoPacket = binary()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Processes an incoming packet. Performs authentication and decryption as necessary. The return values should be passed to the agent.</p> <div class=\"note\"><div class=\"label\">Note</div><div class=\"content\"><p> </p><p>Note that the use of the LocalEngineID argument is only intended for special cases, if the agent is to &quot;emulate&quot; multiple EngineIDs! By default, the agent uses the value of <span class=\"code\">SnmpEngineID</span> (see SNMP-FRAMEWORK-MIB). </p> <p></p></div></div> <a name=\"generate_response_msg\"></a> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-generate_response_msg-5-id127086\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpa_mpd.xml#L110\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"generate_response_msg-5\" href=\"/erldoc/docs/#generate_response_msg-5\">generate_response_msg(Vsn, RePdu, Type, ACMData, Log) -&gt; {ok, Packet} | {discarded, Reason}</a></span></div></td><td class=\"func-since-td\"><span class=\"since\">OTP R14B</span></td></tr></tbody></table><table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-generate_response_msg-6-id127093\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpa_mpd.xml#L110\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"generate_response_msg-6\" href=\"/erldoc/docs/#generate_response_msg-6\">generate_response_msg(Vsn, RePdu, Type, ACMData, LocalEngineID, Log) -&gt; {ok, Packet} | {discarded, Reason}</a></span></div></td><td class=\"func-since-td\"><span class=\"since\">OTP R14B</span></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Vsn = &apos;version-1&apos; | &apos;version-2&apos; | &apos;version-3&apos;</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">RePdu = #pdu</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Type = atom()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">ACMData = acm_data()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">LocalEngineID = string()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Packet = binary()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Generates a possibly encrypted response packet to be sent to the network. <span class=\"code\">Type</span> is the <span class=\"code\">#pdu.type</span> of the original request.</p> <div class=\"note\"><div class=\"label\">Note</div><div class=\"content\"><p> </p><p>Note that the use of the LocalEngineID argument is only intended for special cases, if the agent is to &quot;emulate&quot; multiple EngineIDs! By default, the agent uses the value of <span class=\"code\">SnmpEngineID</span> (see SNMP-FRAMEWORK-MIB). </p> <p></p></div></div> <a name=\"generate_msg\"></a> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-generate_msg-5-id127170\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpa_mpd.xml#L138\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"generate_msg-5\" href=\"/erldoc/docs/#generate_msg-5\">generate_msg(Vsn, NoteStore, Pdu, MsgData, To) -&gt; {ok, PacketsAndAddresses} | {discarded, Reason}</a></span></div></td><td class=\"func-since-td\"><span class=\"since\">OTP R14B</span></td></tr></tbody></table><table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-generate_msg-6-id127176\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpa_mpd.xml#L138\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"generate_msg-6\" href=\"/erldoc/docs/#generate_msg-6\">generate_msg(Vsn, NoteStore, Pdu, MsgData, LocalEngineID, To) -&gt; {ok, PacketsAndAddresses} | {discarded, Reason}</a></span></div></td><td class=\"func-since-td\"><span class=\"since\">OTP R14B</span></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Vsn = &apos;version-1&apos; | &apos;version-2&apos; | &apos;version-3&apos;</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">NoteStore = pid()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Pdu = #pdu</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">MsgData = msg_data()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">LocalEngineID = string()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">To = [dest_addrs()]</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">PacketsAndAddresses = [{TDomain, TAddress, Packet}]</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">TDomain = snmpUDPDomain</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">TAddress = {Ip, Udp}</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Ip = {integer(), integer(), integer(), integer()}</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Udp = integer()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Packet = binary()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Generates a possibly encrypted request packet to be sent to the network. </p> <p><span class=\"code\">MsgData</span> is the message specific data used in the SNMP message. This value is received in a <span class=\"bold_code bc-15\"><a href=\"/erldoc/docs/../apps/snmp/snmp_agent_netif#im_send_pdu\"><span class=\"code\">send_pdu</span></a></span> or <span class=\"bold_code bc-15\"><a href=\"/erldoc/docs/../apps/snmp/snmp_agent_netif#im_send_pdu_req\"><span class=\"code\">send_pdu_req</span></a></span> message from the agent. In SNMPv1 and SNMPv2c, this message data is the community string. In SNMPv3, it is the context information.</p> <p> <span class=\"code\">To</span> is a list of destination addresses and their corresponding security parameters. This value is received in the same message from the agent and then transformed trough <span class=\"bold_code bc-17\"><a href=\"/erldoc/docs/#process_taddrs\"><span class=\"code\">process_taddrs</span></a></span> before passed to this function.</p> <div class=\"note\"><div class=\"label\">Note</div><div class=\"content\"><p> </p><p>Note that the use of the LocalEngineID argument is only intended for special cases, if the agent is to &quot;emulate&quot; multiple EngineIDs! By default, the agent uses the value of <span class=\"code\">SnmpEngineID</span> (see SNMP-FRAMEWORK-MIB). </p> <p></p></div></div> <a name=\"process_taddrs\"></a> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-process_taddrs-1-id127308\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpa_mpd.xml#L187\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"process_taddrs-1\" href=\"/erldoc/docs/#process_taddrs-1\">process_taddrs(TDests) -&gt; Dests</a></span></div></td><td class=\"func-since-td\"><span class=\"since\">OTP 17.3</span></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">TDests = [TDest]</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">TDest = {{TDomain, TAddr}, SecData} | {TDomain, TAddr}</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">TDomain = term() % Not at tuple</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">TAddr = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">SecData = term()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Dests = [Dest]</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Dest = {{Domain, Addr}, SecData} | {Domain, Addr}</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Domain = transportDomain()</span><br></div> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Addr = transportAddress() % Depends on Domain</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Transforms addresses from internal MIB format to one more useful to <span class=\"bold_code bc-19\"><a href=\"/erldoc/docs/../apps/snmp/snmp_agent_netif\">Agent Net if</a></span>. </p> <p>See also <span class=\"bold_code bc-17\"><a href=\"/erldoc/docs/#generate_msg\"><span class=\"code\">generate_msg</span>.</a></span> </p> <a name=\"discarded_pdu\"></a> <p></p></div> <table class=\"func-table\"><tbody><tr class=\"func-tr\"><td class=\"func-td\"><div class=\"bold_code fun-type\"><span ><span id=\"ghlink-discarded_pdu-1-id127394\" class=\"ghlink\"><a href=\"/erldoc/docs/https://github.com/erlang/otp/edit/maint/lib/snmp/doc/src/snmpa_mpd.xml#L213\" title=\"Found an issue with the documentation? Fix it by clicking here!\"><span class=\"pencil\"></span></a></span><a class=\"title_link\" name=\"discarded_pdu-1\" href=\"/erldoc/docs/#discarded_pdu-1\">discarded_pdu(Variable) -&gt; void()</a></span></div></td><td class=\"func-since-td\"></td></tr></tbody></table><div class=\"REFBODY rb-5\"><h3 class=\"func-types-title\">Types</h3> <div class=\"REFTYPES rt-4\"><span class=\"bold_code fun-param-type\">Variable = atom()</span><br></div> </div><div class=\"REFBODY rb-7\"><p> </p><p>Increments the variable associated with a discarded pdu. This function can be used when the net_if process receives a <span class=\"code\">discarded_pdu</span> message from the agent. </p> <p></p></div> "}