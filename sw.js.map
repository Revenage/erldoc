{"version":3,"sources":["sw.js"],"names":["CACHE","fromCache","request","caches","open","then","cache","match","matching","fetch","catch","update","response","put","err","console","log","self","addEventListener","event","waitUntil","addAll","respondWith"],"mappings":";AAAA,IAAMA,EAAQ,sBA6Bd,SAASC,EAAUC,GACVC,OAAAA,OACJC,KAAKJ,GACLK,KAAK,SAAAC,GACJA,OAAAA,EAAMC,MAAML,GAASG,KAAK,SAAAG,GAAYA,OAAAA,GAAYC,MAAMP,OAEzDQ,MAAM,WAAMD,OAAAA,MAAMP,KAGvB,SAASS,EAAOT,GACPC,OAAAA,OACJC,KAAKJ,GACLK,KAAK,SAAAC,GACJG,OAAAA,MAAMP,GAASG,KAAK,SAAAO,GAAYN,OAAAA,EAAMO,IAAIX,EAASU,OAEpDF,MAAM,SAAAI,GAAOC,OAAAA,QAAQC,IAAIF,KA1C9BG,KAAKC,iBAAiB,UAAW,SAAAC,GAC/BA,EAAMC,UACJjB,OACGC,KAAKJ,GACLK,KAAK,SAAAC,GACJA,OAAAA,EAAMe,OAAO,CACX,WACA,qBACA,gBACA,gBACA,yBACA,4BACA,wCAMVJ,KAAKC,iBAAiB,QAAS,SAASC,GACtCA,EAAMG,YAAYrB,EAAUkB,EAAMjB,UAClCiB,EAAMC,UAAUT,EAAOQ,EAAMjB,YAG/Be,KAAKC,iBAAiB,WAAY,SAAAC,GAChCJ,QAAQC,IAAI","file":"sw.js","sourceRoot":"../src","sourcesContent":["const CACHE = \"cache-and-update-v1\";\n\nself.addEventListener(\"install\", event => {\n  event.waitUntil(\n    caches\n      .open(CACHE)\n      .then(cache =>\n        cache.addAll([\n          \"/erldoc/\",\n          \"/erldoc/index.html\",\n          \"/erldoc/*.png\",\n          \"/erldoc/*.svg\",\n          \"/erldoc/content/*.json\",\n          \"/erldoc/content/**/*.json\",\n          \"/erldoc/translations/**/*.json\"\n        ])\n      )\n  );\n});\n\nself.addEventListener(\"fetch\", function(event) {\n  event.respondWith(fromCache(event.request));\n  event.waitUntil(update(event.request));\n});\n\nself.addEventListener(\"activate\", event => {\n  console.log(\"activated\");\n});\n\nfunction fromCache(request) {\n  return caches\n    .open(CACHE)\n    .then(cache =>\n      cache.match(request).then(matching => matching || fetch(request))\n    )\n    .catch(() => fetch(request));\n}\n\nfunction update(request) {\n  return caches\n    .open(CACHE)\n    .then(cache =>\n      fetch(request).then(response => cache.put(request, response))\n    )\n    .catch(err => console.log(err));\n}\n"]}