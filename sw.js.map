{"version":3,"sources":["sw.js"],"names":["CACHE","fromCache","request","caches","open","then","cache","match","matching","fetch","catch","update","response","put","self","addEventListener","event","waitUntil","addAll","respondWith"],"mappings":";AAAA,IAAMA,EAAQ,sBAqBd,SAASC,EAAUC,GACVC,OAAAA,OACJC,KAAKJ,GACLK,KAAK,SAAAC,GACJA,OAAAA,EAAMC,MAAML,GAASG,KAAK,SAAAG,GAAYA,OAAAA,GAAYC,MAAMP,OAEzDQ,MAAM,WAAMD,OAAAA,MAAMP,KAGvB,SAASS,EAAOT,GACPC,OAAAA,OACJC,KAAKJ,GACLK,KAAK,SAAAC,GACJG,OAAAA,MAAMP,GAASG,KAAK,SAAAO,GAAYN,OAAAA,EAAMO,IAAIX,EAASU,OAhCzDE,KAAKC,iBAAiB,UAAW,SAAAC,GAC/BA,EAAMC,UACJd,OAAOC,KAAKJ,GAAOK,KAAK,SAAAC,GACtBA,EAAMY,OAAO,CACX,WACA,qBACA,4BACA,uBACA,mCAMRJ,KAAKC,iBAAiB,QAAS,SAASC,GACtCA,EAAMG,YAAYlB,EAAUe,EAAMd,UAClCc,EAAMC,UAAUN,EAAOK,EAAMd","file":"sw.js","sourceRoot":"../src","sourcesContent":["const CACHE = \"cache-and-update-v1\";\n\nself.addEventListener(\"install\", event => {\n  event.waitUntil(\n    caches.open(CACHE).then(cache => {\n      cache.addAll([\n        \"/erldoc/\",\n        \"/erldoc/index.html\",\n        \"/erldoc/content/tags.json\",\n        \"/erldoc/content/**/*\",\n        \"/erldoc/translations/**/*\"\n      ]);\n    })\n  );\n});\n\nself.addEventListener(\"fetch\", function(event) {\n  event.respondWith(fromCache(event.request));\n  event.waitUntil(update(event.request));\n});\n\nfunction fromCache(request) {\n  return caches\n    .open(CACHE)\n    .then(cache =>\n      cache.match(request).then(matching => matching || fetch(request))\n    )\n    .catch(() => fetch(request));\n}\n\nfunction update(request) {\n  return caches\n    .open(CACHE)\n    .then(cache =>\n      fetch(request).then(response => cache.put(request, response))\n    );\n}\n"]}